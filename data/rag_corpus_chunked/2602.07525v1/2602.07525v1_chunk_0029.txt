are merged with the current anchors to form the starting anchors for the subsequent iteration. The PABD algorithm terminates upon complete cessation of diffusion or upon reaching the maximum iterations, returning all activated vertices and their corresponding relevance scores in descending order. New Vertices Final Vertices New Vertices Diffusion New Vertices Diffusion Initial Vertices Diffusion Iteration 1 Iteration 2 Iteration 3 The End Figure 7.An example workflow of the Preference-Aware Bidirectional Diffusion Algorithm. 12 IGMiRAG: Intuition-Guided Retrieval-Augmented Generation with Adaptive Mining of In-Depth Memory Algorithm 1Preference-Aware Bidirectional Diffusion (PABD) 1:Input:initial scoress(v), target layerl, max iterationd 2:Output:extended scoress ′(v) 3:Require: GHHHG ▷The Hierarchical Heterogeneous Hypergraph id2l(·)▷The mapping from key to layer (all vertices) 4:Definitions: LFN(u,dir): layer-filtered neighbors ofualongdir∈ {FORWARD,BACKWARD} HC(u,dir): number of neighbors in LFN(u,dir)with score> S[u] PA(n): preference coefficient∈[0,1], rising withn PAG(c, v, S, γ,dir): score increment for forward/backward diffusion▷Detailed in Algorithm 2 DTF(c, τ 0, l, b): returns TRUEifcpasses thresholdτunder offsetb ▷Detailed in Algorithm 3 DTA(VF ,VB,VA, l2id, b, i,dir): updatesV A, l2id, b, iwith newly activated nodes▷Detailed in Algorithm 4 5:Initialize: S←s(v);V A ←keys(S) buildl2id[ℓ], ℓ∈ {1,2,3}fromV A viaid2l(·)▷The mapping from layer to key (activated vertices) decay factorγ←0.2 thresholdsτ (L) ←0.5,τ (H) ←0.4 biasb←0 6:fori= 0toddo 7:S ′ ←S;V F ← ∅;V B ← ∅ 8:Top-Down: Forward Diffusion Stage▷L,H → N 9:V H ←l2id[3]∪l2id[2]▷Get the high-order anchors 10:forc∈ V H do 11:forv∈LFN(c,FORWARD)do 12:ifS[c]> S[v]andHC(v,FORWARD)>0then 13:S ′[v]←S ′[v] +PAG(c, v, S, γ,FORWARD)▷Update the scores of lower-level vertices 14:ifv /∈ V A then 15: addvtoV F 16:end if 17:end if 18:end for 19:end for 20: DTA(V F ,∅,V A, l2id, b, ,FORWARD)▷Update the activated vertices, mapping, and bias 21:Bottom-Up: Backward Diffusion Stage▷N → L,H 22:V L ←l2id[1] ▷Get the low-order anchors 23:forv∈ V L do 24:forc∈LFN(v,BACKWARD)do 25:ifS[v]> S[c]andDTF(c, τ 0, l, b)then 26:S ′[c]←S ′[c] +PAG(c, v, S, γ,BACKWARD)▷Update the