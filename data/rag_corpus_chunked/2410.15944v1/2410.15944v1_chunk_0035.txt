a message to the thread with the new user input m e s s a g e _ c o n v e r s a t i o n = { " role " : " user " , " content " : [ { " type " : " text " , " text " : u s e r _ i n p u t } ] } m e s s a g e _ r e s p o n s e = client . beta . threads . messages . create ( t hr ea d_ id = m e s s a g e _ t h r e a d . id , ** m e s s a g e _ c o n v e r s a t i o n ) run = client . beta . threads . runs . create ( th re ad _i d = m e s s a g e _ t h r e a d . id , a s s i s t a n t _ i d = a ss is ta nt . id 22 ) r e s p o n s e _ t e x t = " " ci ta ti on s = [] p r o c e s s e d _ m e s s a g e _ i d s = set () while True : r u n _ s t a t u s = client . beta . threads . runs . retrieve ( run . id , th re ad _i d = m e s s a g e _ t h r e a d . id ) if r