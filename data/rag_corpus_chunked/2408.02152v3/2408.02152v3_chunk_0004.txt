for indexing. Specifically, we first generatenpseudo queries{ˆq 1,· · ·,ˆq j,· · ·,ˆq n}for a documentd i and only feed the generated pseudo queries to the LLM to generatencorresponding docids {id1,· · ·, id j,· · ·, id n}, formally: ˆqj =QG(di), idj =LLM(ˆqj), (1) whereQGis a pseudo query generator,i= 1,· · ·,|C|andj= 1,· · ·, n. As depicted in Figure 1, we prompt the LLM in a few-shot manner. After few-shot indexing, we deduplicate docids in thedocid bankB. The de- vised one-to-many mapping technique during few-shot indexing effectively cap- tures diverse relevance signals, addressing limitations faced by prior methods relying on single identifier generation per document. Table 4 in the appendix gives an example of 10 distinct docids generated by Few-Shot GR for a specific document in NQ320K [13,30,31]. Retrievalwithconstrainedbeamsearch.Givenauserqueryqandthedocid bankBcreated in the previous stage, this step aims to use the same prompt (see Figure 1) and the LLM (see Equation 1) from the indexing phase to generate a docidid, formally: id= LLM(q),(2) Where we use constrained beam search [6] to the LLM’s decoding, ensuring the generated docididmatches a valid docid in thedocid bankB. Finally, we map the matched valid docid back to its corresponding document. Note that thedocid bankBundergoes de-duplication, ensuring that each docid uniquely corresponds to a single document. 4 Askari et al. Table 1: Retrieval quality of Few-Shot GR and baselines on NQ320K and MS300K. DSI-QG (InPars) and Few-Shot GR use the query generator from InPars [2] to generate pseudo queries. Methods marked† are our reimplementa- tions; all other results are from the corresponding papers [34,30,29,34]. The best value in each column is marked inbold, and the second best is underlined. Method NQ320K MS300K Recall@1 Recall@10 MRR@100 Recall@1 Recall@10 MRR@10 BM25 29.7 60.3 40.2 39.1 69.1 48.6 DocT5Query 38.0 69.3 48.9 46.7 76.5 56.2 ANCE 50.2