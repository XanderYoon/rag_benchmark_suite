alignment. We save the processed terms to the TM module, which ensures that subsequent questions can also be indexed to relevant terminologies and in turn allows the model to be progressively tuned as the dialogue progresses. It is worth noting that in this process we link the terminology in the TM one-to-one with the documents in the knowledge database, which will be used to speed up the subsequent retrieval process. Enhanced Sentence Generation (ESG): A more accurate question spe- cially generated for information retrieval can be achieved through terminology retrieval and combination using TM, reducing the effect of domain-specific vo- cabulary and facilitating robust information retrieval. After that, we perform Information Retrieval based on Enhanced Sentence. First, we link documents based on terminology T = {Tn}k n=1 in Enhanced Sen- tence, and the linked document is represented by R = {Rm}M m=1. After that, only the document in the link needs to be retrieved. Considering the specialized nature of medical databases and the similarity of some documents, here we additionally use the following mapping to amplify the gap between the confidence probabilities for better document retriever. Ë†pn = map(pn) = exp(pn)PN i=1 exp(pi) , n = 1, ..., N (1) 3.2 Emotional In-Context Learning Emotional In-Context Learning, the second part of our methodology, is dedicated to the integration and understanding of emotional dimensions: 1. Emotionally Attuned Generation:The generative componentG is tasked with sentence formation while ensuring that the text resonates with the de- sired emotional undertones, aligning with the target attributes. 2. Gradient-Guided Refinement:Employs a gradient-guided retrieval-generation mechanism to adjust the generated text at each step, ensuring continual alignment with the target emotional attributes for contextually and emo- tionally coherent output. As shown in Figure 3, we can also understand the EICL in terms of a prob- ability space. The