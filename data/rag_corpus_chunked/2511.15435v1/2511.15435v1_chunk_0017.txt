experiments are conducted on NVIDIA RTX3090. We adopt PGD-step 50, step sizeα= 1/255, perturbation boundϵ= 8/255for the two stages respectively in retrieval perturbation generation. The trade-off parameterβand margin parameterγare set to 0.4 and 0.6 in all loss functions. We adopt the X-transfer noise asδ g in our experiments. For OK-VQA, we use the off-the-shell CLIP ViT-L/14 as well as a fine-tuned version of it as retrievers. For Infoseek, we use the off-the-shell Siglip-so400m and CLIP ViT-H as retrievers following PoisonedEye [37]. For generators, we use the off-the-shell BLIP-2-flan-T5-xl and LLava-NEXT models. 4.3. Baseline Models We compare our method with various state-of-the-art visual noise generation algorithms. AnyAttack [39] finetuned a decoder to generate noise for any image that transforms it to any target. We use the released AnyAttack decoder to generate noises using the reference image in our method for comparison. X-transfer [14] learned a transferrable noise that can be applied to any image. We employ the ”xtrans- fer large linf eps12 non targeted” noise and setϵ= 8to apply to all the images. LMM Attack [7] learned the noise using PGD algorithm, with the cross entropy loss to mini- mize similarity between the adversarial image and its image caption as the objective function. Since the code was not re- leased, we re-implemented the algorithm and set PGD-step to 50. 4.4. Experimental Results 4.4.1. Main Attack Results The main attack results of attacking the MRAG system on two datasets are shown in Table 1 and Table 2. The overall results show that our proposed method achieved the most severe attack influence on retrieval and generation process of MRAG. Several key conclusions can be made: Our hierarchical attack works on both retrieval and generation.Among the datasets, our hierarchical attack method all achieve declines in both retrieval and generation metrics. As shown in the