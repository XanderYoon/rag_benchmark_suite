the MultiHopAgent ensures that the generated answer is well- supported by relevant and contextually consistent information. The retrieval process in MultiHopAgent supports multiple data sources, such as pre-constructed knowledge bases and web pages, ensuring that the system can retrieve contextual information from diverse repositories. By integrating various search mechanisms, the multi-hop reasoning framework provides a robust solution for addressing complex queries that require the synthesis of information from multiple domains. 7 3.6 DeepWriter The Multimodal Report Generation component in the HetaRAG system enables the automatic gen- eration of reports from unstructured documents, and it is implemented by DeepWriter [48]. Deep- Writer leverages large language models (LLMs) and a vector database to extract semantic infor- mation from unstructured documents and generate structured textual reports conditioned on user queries. The overall pipeline is illustrated in Figure 3. The system allows users to input queries, which then drive the report generation process, ensuring that the resulting report is comprehensive, coherent, and relevant to the userâ€™s specific needs. This capability is particularly beneficial for gen- erating professional-grade, factually grounded documents, as it integrates both textual and visual data. Online Processing Stage Offline Processing Stage Hierarchical DatabasePDF Processing MinerU Knowledge Level Chunk Level Embedding Generation GME Model Multimodal Captions Database Vector Storage Metadata Index Phase 1: Query Processing Phase 2: Hierarchical Retrieval Phase 3: Content Organization Phase 5: Multimodal Integration Phase 6: Citation Generation Phase 7: Final Assembly Generated Document RewriteQuery DecomposeTask ExtractMultimodalTasks RetrieveFromKB FilterTextContent FilterVisualContent GenerateSections ClusterBySections Phase 4: Section Writing CreateDraft GetSectionContent RefineDraft ComputeRelevance CollectMultimodalContent OptimizePlacement FindSource GenerateCitation AddCitation AddImagePaths ValidateCitations FormatDocument Multimodal Content Factual Grounding Fine-grained Citations Figure 3: The Framework of DeepWriter The report generation process is divided into several stages. First, DeepWriter retrieves contex- tual information through DocFinder by leveraging vector search, ensuring that the retrieved content is relevant and