an associated open-ended queryq. The retriever then selects a relevant documentdfrom an external database. Conditioned onqandd, the LLMMproduces a long-form guidancezto support the decision. In addition to this guidance, we must also provide a confidence scorec. This score can be obtained in two ways: (i) by askingMto verbalize its own confidence, or (ii) by predicting it using a sep- arately trained forecasting functionf. In our framework, because verbalized confidences fromM are often poorly calibrated, we adopt the latter. The forecasting function outputsc=f(t, q, d), a probability that the user’s decision will be correct, conditioned on a temperature parametertof the decision-making user,q, andd. While prior work definesf(x, z)over LLM outputs [6], our for- mulationf(t, q, d)predicts correctness beforezis generated. This enables reranking and simplifies supervision. The user ultimately consultszandcto make a decision, and our goal is to ensure that the predicted confidencecis well aligned with the empirical accuracy of decision-making scenarios. Fig. 2rightillustrates the overall usage process of CalibRAG. 3.1 Problem setup To train and evaluate the forecasting functionf, we introduce an LLM-based surrogate user model Uthat can simulate human decision-making without requiring costly human annotations [6]. We construct prompts such thatUmakes decisions by referencing both the guidancezand the con- fidence scorec, deciding whether to accept the guidance based on the confidence (see Sec. G for prompt details). Since the output of the surrogate user modelUis long-form text rather than a class label, we utilize theGPT-4o-minimodel (denoted byG) to automatically evaluate whether the user’s response matches the correct answery. To construct supervision signals forf, we sample responses fromUacross various decoding tem- peraturest∈ Tto simulate a range of user behaviors. This temperature reflects behavioral traits of the userU, such as risk tolerance or decision urgency. For instance, if the user needs to make a decision quickly and prefers reliability, they can choose