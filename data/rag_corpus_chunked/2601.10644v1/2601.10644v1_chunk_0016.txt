) 12] Fig. 4.Example code snippet for integrating Pyserini withRoutIR. This example can be extended with more flexible parameter configuration or even allowing the endpoint users to specify the retrieval model. Full example can be found athttps://github. com/hltcoe/routir/blob/main/examples/pyserini_extension.py. models with Anserini [50]. These Engines are implemented based on anEngine Python abstract class that ensures a common interface. These Engine types cover most use cases when using neural models. How- ever, since there is not yet a common reranker architecture (besides the general pointwise, pairwise, listwise, and setwise paradigms), we have selectively imple- mented a few rerankers as built-in Engines with an example script for loading a more complex model throughfile imports.14 In the next section, we describe how to incorporate an external IR toolkit intoRoutIR. 4.3 Integration with Existing IR Toolkits Figure 4 demonstrates a simple example that integrates Pyserini [25] intoRoutIR. For index retrieval, one only needs to implement the initialization of the Engine, which contains index loading and hyperparameter settings if applicable, and the search batchmethod, which takes a batch of queries and returns a list of results in the same order as the input queries. Since all search methods are asynchronous,RoutIRdoes not wait for a mod- ule to finish searching before attending to the next API request. However, since Python asynchronous functions are still single-threaded on a single processor, unless the Engine spawns another search process or calls out to another process, processes can be blocked. For example, a standalone Lucene instance searching a batch of queries may block the Python process from accepting an API request. We provide some implementation guidance on how these concurrency issues can be overcome in the documentation. However, such engineering issues are model 14 Rank1 [44], a pointwise reasoning reranker, integration script can be found inhttps: //github.com/hltcoe/routir/blob/main/examples/rank1_extension.py. RoutIR: Fast Serving of