size of the number format [46]. For Llama-8B with a 16-bit number format, this is32×8×128×2×2 = 131 kB per token. While exact token counts depend on the tok- enization process, each document (for all applications) is 100 words long; forLlama-8B and Llama-70B, this averaged 127 tokens per document across our evaluation dataset. 3.2 Examining Approximate Search for RAG An important algorithmic consideration that can impact the inference time and generation accuracy of RAG is the choice of retrieval algorithm from the vector database, where we can use exact nearest neighbor search (ENNS) or approximate nearest neighbor search (ANNS). The particular algorithm used for retrieval is implemented by a data structure called an index, which stores the embedding vectors computed offline, as described in Section 2.1. For ENNS, an index is a wrapper around an array of embedding vectors sequentially iterated Derrick Quinn et al. 1/4 1/21248163264128 0%10%20%30%40%50%60% Queries/sec (Log scale) Generation Accuracy FiD (ENNS)FiD (ANNS-1)FiD (ANNS-2)Llama-8B (ENNS)Llama-8B (ANNS-1)Llama-8B (ANNS-2)Llama-70B (ENNS)Llama-70B (ANNS-1)Llama-70B (ANNS-2)K=1K=4K=32/128K=16 Fig. 2. Generation accuracy vs. throughput (Queries/sec) of representative RAG applications for various retrieval algorithms and document counts (K). The corpus size is set to 50 GB and batch size to 16. over during the search, but for ANNS, the index can be more complex. For example, HNSW stores embedding vectors in a graph-based data structure [52]. To evaluate ANNS, we use the state-of-the-art HNSW [52] ANNS algorithm, and fine-tune theM and efConstruction pa- rameters to maximize retrieval accuracy while maintaining a reasonable graph, yielding an index withM of 32 andefCon- struction of 128. From this, we evaluate two configurations, ANNS-1 and ANNS-2, which use different efSearch param- eters: 2048 and 10000. In the context of an end-to-end RAG system, the trade-off of generation accuracy and runtime was evaluated for this index for various choices of efSearch. A