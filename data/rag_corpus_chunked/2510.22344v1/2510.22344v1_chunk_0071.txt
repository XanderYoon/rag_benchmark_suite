we designed a two- part prompt structure. The PROMPT_SYSTEM prompt establishes the LLM’s persona as an “ex- pert evaluation researcher” and enforces a strict JSON output schema based on a predefined fail- ure taxonomy. The PROMPT_USER_TEMPLATE then provides the data batch and requires the model to ground its diagnosis in specific evidence from the logs, ensuring each classification is structured, explainable, and actionable. FAILURE_ANALYSIS_PROMPT = """ **ROLE:** You are an expert RAG (Retrieval-Augmented Generation) system diagnostician. Your task is to perform a meticulous root cause analysis on a failed query-answer pair from an advanced, iterative RAG system. **CONTEXT:** The system has already produced an answer that was graded as incorrect. You have been given the complete execution trace for this failed sample. Your goal is to identify the single, primary point of failure within the RAG pipeline. **FAILURE CATEGORIES:** You must classify the failure into one of the following six categories. Read these definitions carefully. 1. **Query Decomposition Error:** The initial user question was not broken down into effective, specific sub-queries. The sub-queries were irrelevant, missed key aspects of the original question, or sent the retrieval process in the wrong direction from the very beginning. 2. **Retrieval Failure:** The retriever, despite having well-formed sub-queries, failed to find and return the relevant documents from the knowledge base. The correct information was simply not present in the`[All Retrieved Documents (Unfiltered)]` set. 3. **Evidence Filtering Error:** The correct information WAS successfully retrieved by the retriever, but the subsequent filtering/reranking step mistakenly discarded the crucial documents. Look for correct information in`[Discarded Documents]` that should have been kept. 4. **SEA Error (Strategic Analyst Error):** The system's 'Strategic Intelligence Analyst'module failed in its reasoning. This can manifest in several ways: - **A) Flawed Deconstruction:** The'Required Findings' checklist in its analysis was incorrect or missed the main