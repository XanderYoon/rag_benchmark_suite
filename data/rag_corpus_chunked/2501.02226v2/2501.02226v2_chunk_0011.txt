augmented from KG based on its popularity (e.g., sales volume and page view). Particularly, the item is retrieved if its popularity is less than the pre-defined threshold p, otherwise not. By incorporating this strategy, the retrieval time in K-RagRec can be significantly reduced to achieve more efficient retrieval. 3.5 Knowledge Sub-graphs Retrieval Given the query for knowledge sub-graphs retrieval, we adopt the same PLM as the first indexing step to ensure that the query is in the consistent embedding space as the knowledge sub-graph representation. We define the text attribute (e.g., item’s title and descriptions) xqj of the item vj that needs to be retrieved as the query and obtain its semantic infor- mation qj as: qj = PLM(xqj) ∈ Rd. (4) Next, we retrieve the top- K most similar sub- graphs Gj = {g′ 1, ..., g′ K} from G for item vj: Gj = argtopKg∗∈G sim qj, zg∗  , (5) where sim(·, ·) is a similarity metric for measuring the similarity between the query representation qj and knowledge sub-graph g∗’s representationzg∗ in knowledge vector database. Finally, the retrieved knowledge sub-graphs for items required to be re- l-hop2-hop1-hop node edge movie_j PLM Movies Other Entities PLM GNNIndexing Layer GNNIndexing Layer GNNIndexing Layer ... 1. Hop-Field Knowledge Sub-graphs for Semantic Indexing Knowledge Vector Database 3. Knowledge Sub-graphs Retrieval GNNEncoding Prompt (Query): What is the top recommended movie for user_63 who watched {movie_1, ..., }? Projector Large Language Model (LLM) Response: The user may want to watch the movie_*, because ... 5. Knowledge-augmented Recommendation Retrieved Knowledge Sub-graphs 4. Knowledge Sub-graphs Re-Ranking ... {movie_1, ... , movie_5} User Historical Interactions {movie_1 <RET>, ... , movie_5} ... ... 2. Popularity Selective Retrieval Policy ... Knowledge Graph for Items Retrieved Knowledge Sub-graphs ... ... Semantic Information node attributes edge attributes Re-ranked Knowledge Sub-graphs