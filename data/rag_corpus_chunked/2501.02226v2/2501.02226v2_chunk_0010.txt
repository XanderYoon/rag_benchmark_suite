defined by: zl no = GNNIndexing ϕ1 ({z(l−1) nm , r(l−1) e<o,m> : nm ∈ N (no)}), (3) where N (no) is the set of neighbours of node no, and e<o,m> is the edge between node no and nm. For each entity, its l-hop representation can be seen as a knowledge sub-graph representation contain- ing the l-hop neighbors of itself. Therefore, we can express the knowledge sub-graph representation of go ∈ G as zgo, where G is the set containing all the knowledge sub-graphs. For each sub-graph, we store its representation in a knowledge vector database. 3.4 Popularity Selective Retrieval Policy Although RAG can augment the LLM for model- ing user preferences with retrieved knowledge, re- trieving each item can cost a significant amount of retrieval time, which can severely degrade the user experience and cause user churn. Meanwhile, most users’ online behaviours in recommender systems are following the power law distribution (Abdol- lahpouri et al., 2017; Celma and Herrera, 2008) in which a small proportion (e.g., less than 20%) of items (i.e., popular items) often account for a large proportion of users’ online behaviours (e.g., more than 80%), while cold-start items have a few inter- actions from users. Therefore, most models tend to keep rich knowledge of popular items, resulting in an inferior performance for cold-start items (Zhao et al., 2023). To this end, we design a popularity selective retrieval policy to determine whether an item needs to be augmented from KG based on its popularity (e.g., sales volume and page view). Particularly, the item is retrieved if its popularity is less than the pre-defined threshold p, otherwise not. By incorporating this strategy, the retrieval time in K-RagRec can be significantly reduced to achieve more efficient retrieval. 3.5 Knowledge Sub-graphs Retrieval Given the query for knowledge sub-graphs retrieval, we